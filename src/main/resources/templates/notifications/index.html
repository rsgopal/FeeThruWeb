<!doctype html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Manage Notifications</title>
<script type="text/javascript">
	function massCheck() {
		var checked = document.getElementById("selectAll").checked;
		$(".notificationSelect").each(function(i, select) {
			select.checked = checked;
		})
	}
</script>
</head>
<body>
	<div layout:fragment="content">
		<form action="/notifications/send" method="post">
			<div class="row">
				<div class="col-md-12">
					<div class="text-right">
						<button type="submit" class="btn btn-primary">Send
							Notifications</button>
					</div>
				</div>
			</div>
			<p />
			<table class="table table-striped table-bordered">
				<thead class="thead-dark">
					<tr>
						<th scope="col"><div class="text-center">
								Select<br /> <input name="selectAll" id="selectAll"
									type="checkbox" onclick="massCheck()" checked="checked">
							</div></th>
						<th scope="col">Bill Date</th>
						<th scope="col">Account</th>
						<th scope="col">Email</th>
						<th scope="col">Last Notification Sent</th>
						<th scope="col">Subject</th>
						<th scope="col">Message</th>
					</tr>
				</thead>
				<tbody th:each="notification,stat: ${notificationList.items}">
					<tr>
						<td class="text-center"><input type="checkbox"
							class="notificationSelect"
							th:field="*{notificationList.items[__${stat.index}__].invoice}"
							th:value="*{notificationList.items[__${stat.index}__].invoice.id}"></td>
						<td th:text="${notification.invoice.billDate}"></td>
						<td th:text="${notification.invoice.account.displayName}"></td>
						<td th:text="${notification.invoice.account.email}"></td>
						<td
							th:text="${notification.invoice.account.lastNotificationDate ?: ''}"></td>
						<td><textarea cols="25"
								th:field="*{notificationList.items[__${stat.index}__].subject}"></textarea></td>
						<td><textarea cols="80"
								th:field="*{notificationList.items[__${stat.index}__].message}"></textarea></td>
					</tr>
				</tbody>
			</table>
		</form>
	</div>
</body>
</html>